<!DOCTYPE html>
<html lang="fr">

	<head>
		<meta charset="utf-8">
		<title>G√©n√©rateur de critique e-sidoc</title>
		<style type="text/css">
			.fontweight100{
				font-weight: 100;
			}
			.question-titre{
				font-weight: bold;
			}
			.question-bloc{
				padding-bottom: 1.5em;
			}
			.astuce{
				font-size: 0.9em;
				margin-top: -0.25em;
				font-weight: 100;
			}
			.alert li{
				margin-left: 3em;
			}
			.chapitre{
				margin-top: 2em;
			}
			#critique{
				margin-bottom: 20px;
			}

			/* Rating Star Widgets Style */
			.rating-stars ul {
			  list-style-type:none;
			  padding:0;
			  
			  -moz-user-select:none;
			  -webkit-user-select:none;
			}
			.rating-stars ul > li.star {
			  display:inline-block;
			  
			}

			/* Idle State of the stars */
			.rating-stars ul > li.star > i.fa {
			  font-size:1.5em; /* Change the size of the stars */
			  color:#ccc; /* Color on idle state */
			}

			/* Hover state of the stars */
			.rating-stars ul > li.star.hover > i.fa {
			  color:#FFCC36;
			}

			/* Selected state of the stars */
			.rating-stars ul > li.star.selected > i.fa {
			  color:#FF912C;
			}

			
		</style>

		<link rel="stylesheet" href="https://frontend.esidoc.fr/libs/twitter-bootstrap/css/bootstrap.min.css" type="text/css">
		<link rel="stylesheet" href="https://backend.esidoc.fr/libs/font-awesome/css/font-awesome.min.css" type="text/css">
		<link rel="stylesheet" href="https://frontend.esidoc.fr/css/all.min.css" type="text/css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-theme/0.1.0-beta.10/select2-bootstrap.min.css">
		
		
		<script src="https://frontend.esidoc.fr/libs/jquery/jquery.min.js?ver=1583172060000"></script>
		<script src="https://frontend.esidoc.fr/libs/twitter-bootstrap/js/bootstrap.min.js?ver=acbc186d"></script>
		<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/i18n/fr.js"></script>
		

	</head>
	<body>
		<article>
			<!-- <div class="container-fluid chapitre">
				<p>La critique litt√©raire vise √† <strong>relever les qualit√©s et les d√©fauts</strong> d‚Äôun livre. Faire une critique, c‚Äôest <strong>justifier de mani√®re convaincante et personnelle son opinion</strong>. C‚Äôest aussi un moyen de <strong>partager son avis</strong> avec d‚Äôautres.</p>
				<p>En t'identifiant, via PCN, tu peux poster tes critiques sur les livres du CDI !</p>
			</div> -->
			
		<form id="generateur-critique">
			<div class="container-fluid chapitre">
				<h2 class="title">I - Pr√©sentation du livre</h2>
				
				<div class="row question-bloc">
					<label for="titre"><div class="question-titre">Quel est le titre du livre ?</div></label>
					<input  id="titre" type="text" class="form-control" placeholder="Titre du livre">
				</div>

				<div class="row question-bloc">
					<label for="auteur"><div class="question-titre">Qui est l'auteur du livre ?</div></label>
					<input  id="auteur" type="text" class="form-control" placeholder="Nom de l'auteur">
				</div>
			  
				<div class="row question-bloc">
					<label for="type">
						<div class="question-titre">De quel type de livre s'agit-il ?</div>
					    <select id="type" class="form-control select2-single">
					    	<option></option>
					    	<option value="un album">album</option>
					    	<option value="une bandes-dessin√©es">bandes-dessin√©es</option>
					    	<option value="un conte">conte</option>
					    	<option value="un manga">manga</option>
					    	<option value="une pi√®ce de th√©√¢tre">th√©√¢tre</option>
					    	<option value="un recueil de po√©sie">recueil de po√©sie</option>
					    	<option value="un roman">roman</option>
					    </select>
					</label>
				</div>

				<div class="row question-bloc">
					<label for="genre">
						<div class="question-titre">Quel est le genre de fiction ?</div>
					    <select id="genre" class="form-control select2-multiple" data-tooltips="Tu peux √©crire un autre genre si il n'est pas dans la liste" data-toggle="tooltip" data-placement="right" multiple>
					    	<option value="animalier">animalier</option>
					    	<option value="amour">amour</option>
					    	<option value="biographique">biographique</option>
					    	<option value="fantastique">fantastique</option>
					    	<option value="historique">historique</option>
					    	<option value="horreur">horreur</option>
					    	<option value="humoristique">humoristique</option>
					    	<option value="merveilleux">merveilleux</option>
					    	<option value="policier">policier</option>
					    	<option value="science-fiction">science-fiction</option>
					    	<option value="soci√©t√©">soci√©t√©</option>
					    </select>
					</label>
				</div>

				<div class="row question-bloc col-sm-6>
					<label for="theme">
						<div class="question-titre">Quel est le th√®me de fiction ?</div>
					    <select id="theme" class="form-control select2-multiple" data-tooltips="Tu peux √©crire un autre th√®me si il n'est pas dans la liste" data-toggle="tooltip" data-placement="right" multiple>
					    	<option value="d'amiti√©">l'amiti√© </option>
					    	<option value="d'amour">l'amour</option>
					    	<option value="des diff√©rences">les diff√©rences </option>
					    	<option value="d'√©cologie">l'√©cologie  </option>
					    	<option value="d'exil">l'exil</option>
					    	<option value="de lafamille">la famille</option>
					    	<option value="de laguerre">la guerre</option>
					    	<option value="deharc√®lement">le harc√®lement</option>
					    	<option value="de la maladie">la maladie</option>
					    	<option value="de mensonge">le mensonge </option>
					    	<option value="de secret">les secrets</option>
					    	<option value="de sport">le sport </option>
					    	<option value="de voyages">les voyages</option>
					    </select>
					</label>
				</div>

				<div class="row question-bloc">
					<label for="txt_resume">
						<div class="question-titre">R√©sume l'histoire en une ou deux phrases.</div>
						<div class="form-text text-muted astuce">Pense √† r√©pondre aux questions QUI ?, QUOI ?, POURQUOI ?, QUAND ? et O√ô ?, quand c'est pr√©cis√© dans l'histoire.</div>
					</label>
					<textarea rows="3" id="txt_resume" class="form-control"></textarea>
				</div>

			</div>

			<div class="container-fluid chapitre">
				<h2>II - Avis argument√©</h2>

				<div class="row question-bloc">
					<label for="emotion">
						<div class="question-titre">Qu'as-tu ressenti √† la lecture ?</div>
					    <select id="emotion" class="form-control select2-single">
					    	<option></option>
					    	<option value="effrayante">üò± de la peur</option>
					    	<option value="joyeuse">üòÉ de la joie</option>
					    	<option value="enrageante">üò† de la col√®re</option>
					    	<option value="triste">üò• de la tristesse</option>
					    </select>
					</label>
				</div>

				<div class="row question-bloc">
					<label for="stars">
						<div class="question-titre">Qu'as-tu ressenti √† la lecture ?</div>
					</label>
					
				    <div class='rating-stars'>
				        <ul id='stars'>
				            <li class='star' data-title="effrayante" data-value='1'>
				                <div class="emotion-emoji">üò±</div>
				                <div class="emotion-titre">de la peur</div>
				            </li>
					        <li class='star' data-title="joyeuse" data-value='2'>
					        	<div class="emotion-emoji">üòÉ</div>
				                <div class="emotion-titre">de la joie</div>
					             
					        </li>
					        <li class='star' data-title="enrageante" data-value='3'>
					        	<div class="emotion-emoji">üò†</div>
				                <div class="emotion-titre">de la col√®re</div>
					        </li>
					        <li class='star' data-title="tristesse" data-value='4'>
					        	<div class="emotion-emoji">üò•</div>
				                <div class="emotion-titre">de la tristesse</div>
					        </li>
				        </ul>
				    </div>
				</div>

				<div class="row question-bloc">
					<label for="emotion-justification">
						<div class="question-titre">Pourquoi as-tu ressenti cette √©motion ?</div>
						<div class="form-text text-muted astuce">Continue la phrase : car&hellip;</div>
					</label>
					<textarea rows="3" id="emotion-justification" class="form-control">car </textarea>
				</div>
				 

				<div class="row question-bloc">
					<label for="stars">
						<div class="question-titre">Quel est ton avis sur ce livre ?</div>
					</label>
					
					<!-- Rating Stars Box -->
				    <div class='rating-stars'>
				        <ul id='stars'>
				            <li class='star' data-title="J'ai d√©test√©" data-value='1'>
				                <i class='fa fa-star fa-fw'></i>
				            </li>
					        <li class='star' data-title="Je n'ai pas aim√©" data-value='2'>
					            <i class='fa fa-star fa-fw'></i>
					        </li>
					        <li class='star' data-title="J'ai aim√©" data-value='3'>
					            <i class='fa fa-star fa-fw'></i>
					        </li>
					        <li class='star' data-title="J'ai beaucoup aim√©" data-value='4'>
					            <i class='fa fa-star fa-fw'></i>
					        </li>
					        <li class='star' data-title="J'ai ador√©" data-value='5'>
					            <i class='fa fa-star fa-fw'></i>
					        </li>
				        </ul>
				    </div>
				</div>

				<div class="row question-bloc">
					<label for="qualificatif">
						<div class="question-titre">Comment peux-tu qualifier l'histoire ?</div>
					    <select id="qualificatif" class="form-control select2-multiple" data-tooltips="Tu peux √©crire un autre qualificatif si il n'est pas dans la liste" data-toggle="tooltip" data-placement="right" multiple>
					    	<option value="pleine d'actions">pleine d'actions</option>
					    	<option value="captivante">captivante</option>
					    	<option value="confuse">confuse (difficile √† comprendre)</option>
					    	<option value="d√©paysante">d√©paysante</option>
					    	<option value="dr√¥le">dr√¥le</option>
					    	<option value="√©mouvante">√©mouvante</option>
					    	<option value="ennuyeuse">ennuyeuse</option>
					    	<option value="instructive">instructive</option>
					    	<option value="intrigante">intrigante</option>
					    	<option value="originale">originale</option>
					    	<option value="path√©tique">path√©tique</option>
					    	<option value="po√©tique">po√©tique</option>
					    	<option value="r√©aliste">r√©aliste</option>
					    	<option value="r√©voltante">r√©voltante</option>
					    	<option value="surprenante">surprenante</option>
					    	<option value="pleine de suspense">pleine de suspense</option>
					    </select>
					</label>
				</div>

				<div class="row question-bloc">
					<label for="ecriture">
						<div class="question-titre">Que penses-tu de la fa√ßon dont est √©crite l'histoire ?</div>
					    <select id="ecriture" class="form-control select2-multiple" data-tooltips="Tu peux √©crire un autre qualificatif si il n'est pas dans la liste" data-toggle="tooltip" data-placement="right" multiple>
					    	<option value="court">peu de pages</option>
					    	<option value="aux nombreuses pages">beaucoup de pages</option>
					    	<option value="au vocabulaire difficile √† comprendre">vocabulaire compliqu√©</option>
					    	<option value="facile √† comprendre">facile √† comprendre</option>
					    	<option value="bien √©crit">bien √©crite </option>
					    	<option value="au style original">style original</option>
					    </select>
					</label>
				</div>

				<div class="row question-bloc">
					<label for="recommandation">
						<div class="question-titre">Recommanderais-tu ce livre ?</div>
					    <select id="recommandation" class="form-control select2-multiple" data-tooltips="Tu peux √©crire une autre recommandation si il n'est pas dans la liste" data-toggle="tooltip" data-placement="right" multiple>
					    	<option value="est un chef d'oeuvre !">un chef d'oeuvre ! </option>
					    	<option value="est √† ne pas rater !">√† ne pas rater !</option>
					    	<option value="est √† lire absolument">√† lire absolument !</option>
					    	<option value="se d√©vore d'une traite !">√† d√©vorer ! </option>
					    	<option value="est impossible √† l√¢cher !">impossible √† l√¢cher !</option>
					    	<option value="invite √† la r√™verie.">une invitation √† la r√™verie</option>
					    	<option value="permet de passer un bon moment.">un bon moment √† passer</option>
					    	<option value="offre une lecture sympathique.">une lecture sympathique</option>
					    	<option value="est √† laisser sur l'√©tag√®re.">√† laisser sur l'√©tag√®re</option>
					    	<option value="est sans int√©r√™t.">sans int√©r√™</option>
					    	<option value="tombe des mains.">tombe des mains</option>
					    </select>
					</label>
				</div>
				  
				 
				<div class="row question-bloc">	
					<button type="button" id="generer" class="btn btn-success" value="G√©n√©rer la critique" aria-label="Left Align">
						<span aria-hidden="true"><i class="fa fa-check"></i> G√©n√©rer la critique</span>
					</button>
					
					<button type="button" id="reset" class="btn btn-primary" value="R√©tablir les valeurs par defaut" aria-label="Left Align">
				  		<span aria-hidden="true"><i class="fa fa-undo"></i> R√©tablir les valeurs par defaut</span>
				    </button>
					
					<!--
					<input type="button" class="btn btn-primary" onclick="document.forms[0].reset();document.forms[1].reset();document.forms[2].reset();document.forms[3].reset();document.forms[4].reset();document.forms[5].reset();document.forms[6].reset();document.forms[7].reset();document.forms[8].reset();document.forms[9].reset();document.forms[10].reset();document.forms[11].reset();document.forms[12].reset();" value="R√©tablir les valeurs par defaut" />
					-->

			</div>
			<div class="container-fluid chapitre">
				<h2>III - Personnalisation</h2>
				<div class="row question-bloc">	
					<div class="alert alert-info" role="alert">
						<h4 class="alert-heading"><i class="fa fa-exclamation-circle"></i> Avant de copier la critique :</h4>
						<ul>
							<li>relis-la et corrige les √©ventuelles coquilles</li>
							<li>enrichis-la en ajoutant d'autres √©l√©ments personnels.</li>
						</ul>
					</div>
					<textarea id="critique" rows="10" readonly class="form-control"></textarea>
		
					<div id="copy-alert" class="alert alert-success alert-dismissible" role="alert">
						<button id="copy-close" type="button" class="close" aria-label="Close"><span aria-hidden="true">√ó</span></button>
						Texte copi√© !
					</div>

					<button type="button" id="copy" class="btn btn-default citation-copy">
						<i class="fa fa-copy" aria-hidden="true"></i> Copier le texte
					</button>
				</div>
			</div>
			
		</form><!-- mon form -->
		</article>

	<script type="text/javascript">
		function getMyValue(myValue){
		//alert($("#livre option:selected").text());
		// alert($("#txt_titre").val());
		  var val = document.forms[myValue];
		  var txt = "";
		  var i;
		  for (i = 0; i < val.length; i++) {
		    if (val[i].checked) {
		      txt = txt + val[i].value + " ";
		    }
		  }
		  return txt;
		}

		/* G√©n√©ration de la critique */
		function myCritic() {
			// on r√©cup√®re les valeurs du formulaire
			var titre = $('#titre').val();		
			var auteur = $('#auteur').val();
			var type = $("#type option:selected").val();

			var avis = $('#stars li.selected').last().data('title');
			// var txt_livre=getMyValue("livre");
			// var txt_genre=getMyValue("genre");
			// var txt_theme=getMyValue("theme");
			// var txt_emotion=getMyValue("emotion");
			// var txt_avis=getMyValue("avis");
			// var txt_qualifhist=getMyValue("histoire");
			// var txt_ecriture=getMyValue("ecriture");
			// var txt_recomm=getMyValue("recommandation");

			  // document.getElementById("critique").value = document.getElementById("txt_titre").value + ", √©crit par " + document.getElementById("txt_auteur").value + ", est " + txt_livre + txt_genre + "qui parle " + txt_theme + ". " + document.getElementById("txt_resume").value + " L'histoire est " + txt_emotion + " " + document.getElementById("txt_justifemo").value + ". " + txt_avis + " lire ce livre, car j'ai trouv√© l'histoire " + txt_qualifhist + ". Ce livre " + txt_ecriture + " " + txt_recomm ;

			// on rajoute les mots de liaison et on affiche le tout
			$('#critique').val(
				titre+","+ 
				" √©crit par "+auteur+
				" est "+type+genre+
				" qui parle "+theme+". "+resume+
				" L'histoire est "+emotion+
				" "+justificationEmotion+". "+avis+
				" lire ce livre, car j'ai trouv√© l'histoire "+qualificatif+"."+
				" Ce livre "+ecriture+" "+recommandation
		    );

		}

		/* Remise √† z√©ro du formulaire */
		function raz(){
			$('input').val(null);                               // reset les zones de saisie
			$('textarea').val(null);                            // reset les zones de texte
			$('.select2-single').val(null).trigger('change');   // reset les listes de selection simple
			$('.select2-multiple').val(null).trigger('change'); // reset les listes de selection multiple

			//reset les √©toiles
			var stars = $("#stars").children('li.star');
		    for (i = 0; i < stars.length; i++) {
		      $(stars[i]).removeClass('selected');
		    }
		}

		/* Copie la critique dans le presse-papier */
		function copy(){
		    document.querySelector("#critique").select();
		    document.execCommand("copy");
		    $("#copy-alert").fadeIn(200); //affiche l'alert texte copi√©
		}


		/* Clique sur les boutons */
		$('#copy-close').click(function() {
			$("#copy-alert").hide(); 
		});

		$("#generer").click(function() {
		    myCritic();
		});

		$("#reset").click(function() {
		    raz();
		});

		$("#copy").click(function() {
		    copy();
		});



		$(document).ready(function() {
			//cache l'alerte texte copi√©
			$("#copy-alert").hide();

			//liste de s√©lection simple
		    $('.select2-single').select2({
		        language: "fr",
		        theme: 'bootstrap',
		        width: 'resolve',
			    placeholder: 'Choisis une option'
			});

			//liste de s√©lection multiple
			$('.select2-multiple').select2({
				language: "fr",
				theme: 'bootstrap',
				//dropdownAutoWidth : true,
				//width: 'resolve',
				// width: null,
				// containerCssClass: ':all:',
			    tags: true,
			    allowClear: true,
			    placeholder: 'Choisis une ou plusieurs options'
			});


			//ajout des tooltips pour les listes de s√©lections
			$(".select2-container").tooltip({
		    title: function() {
		        return $(this).prev().attr("data-tooltips");
		    },
		    placement: "right"
			});
		});


		/* Rating star widget */
		$(document).ready(function(){
  
		  /* 1. Visualizing things on Hover - See next part for action on click */
		  $('#stars li').on('mouseover', function(){
		    var onStar = parseInt($(this).data('value'), 10); // The star currently mouse on
		   
		    // Now highlight all the stars that's not after the current hovered star
		    $(this).parent().children('li.star').each(function(e){
		      if (e < onStar) {
		        $(this).addClass('hover');
		      }
		      else {
		        $(this).removeClass('hover');
		      }
		    });
		    
		  }).on('mouseout', function(){
		    $(this).parent().children('li.star').each(function(e){
		      $(this).removeClass('hover');
		    });
		  });
		  
		  
		  /* 2. Action to perform on click */
		  $('#stars li').on('click', function(){
		    var onStar = parseInt($(this).data('value'), 10); // The star currently selected
		    var stars = $(this).parent().children('li.star');
		    
		    for (i = 0; i < stars.length; i++) {
		      $(stars[i]).removeClass('selected');
		    }
		    
		    for (i = 0; i < onStar; i++) {
		      $(stars[i]).addClass('selected');
		    }
		    
		    // JUST RESPONSE (Not needed)
		    var ratingValue = parseInt($('#stars li.selected').last().data('value'), 10);
		    alert($('#stars li.selected').last().data('title'));
		    var msg = "";
		    if (ratingValue > 1) {
		        msg = "Thanks! You rated this " + ratingValue + " stars.";
		    }
		    else {
		        msg = "We will improve ourselves. You rated this " + ratingValue + " stars.";
		    }
		    responseMessage(msg);
		    
		  });
		  
		  
		});


		function responseMessage(msg) {
		  $('.success-box').fadeIn(200);  
		  //$('.success-box div.text-message').html("<span>" + msg + "</span>");
		}

	</script>
</body>
